<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theme Toggle Test</title>
    <meta name="robots" content="noindex, nofollow">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <style>
        body {
            padding: 20px;
            min-height: 100vh;
        }
        .test-navbar {
            background: rgba(0,0,0,0.1);
            padding: 1rem;
            margin-bottom: 2rem;
        }
        .navbar-nav {
            display: flex;
            gap: 1rem;
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .nav-item {
            padding: 0.5rem 1rem;
        }
        .console-output {
            background: #1e1e1e;
            color: #00ff00;
            padding: 1rem;
            border-radius: 5px;
            font-family: monospace;
            margin-top: 1rem;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
    <link rel="icon" type="image/svg+xml" href="img/favicon2.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">
</head>
<body>
    <h1>Theme Toggle Test</h1>
    
    <div class="test-navbar">
        <div class="navbar-nav">
            <a href="#" class="nav-item nav-link">Home</a>
            <a href="#" class="nav-item nav-link">About</a>
            <a href="#" class="nav-item nav-link">Contact</a>
            <!-- Toggle button will be added here by JavaScript -->
        </div>
    </div>

    <div class="info">
        <h2>Current Theme: <span id="current-theme">-</span></h2>
        <p>Data-theme attribute: <code id="data-theme-attr">-</code></p>
        <p>LocalStorage value: <code id="storage-value">-</code></p>
        
        <button onclick="checkStatus()" class="btn btn-primary">Check Status</button>
        <button onclick="clearConsole()" class="btn btn-secondary">Clear Console</button>
    </div>

    <h3>Console Output:</h3>
    <div class="console-output" id="console"></div>

    <script>
        // Intercept console.log to display in page
        const consoleDiv = document.getElementById('console');
        const originalLog = console.log;
        const originalError = console.error;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            consoleDiv.innerHTML += '<div style="color: #00ff00;">[LOG] ' + args.join(' ') + '</div>';
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            consoleDiv.innerHTML += '<div style="color: #ff4444;">[ERROR] ' + args.join(' ') + '</div>';
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        };

        function checkStatus() {
            const theme = document.documentElement.getAttribute('data-theme');
            const storage = localStorage.getItem('theme-preference');
            document.getElementById('current-theme').textContent = theme || 'not set';
            document.getElementById('data-theme-attr').textContent = theme || 'not set';
            document.getElementById('storage-value').textContent = storage || 'not set';
            console.log('Manual check - Theme:', theme, 'Storage:', storage);
        }

        function clearConsole() {
            consoleDiv.innerHTML = '';
        }

        // Monitor theme changes
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.attributeName === 'data-theme') {
                    console.log('Theme changed via MutationObserver:', document.documentElement.getAttribute('data-theme'));
                    checkStatus();
                }
            });
        });
        observer.observe(document.documentElement, { attributes: true });

        console.log('Test page loaded, waiting for main.js...');
    </script>

    <script src="js/main.js"></script>
    
    <script>
        setTimeout(function() {
            console.log('=== Post-load check ===');
            const toggleBtn = document.querySelector('.theme-toggle-nav');
            console.log('Toggle button found:', !!toggleBtn);
            if (toggleBtn) {
                console.log('Toggle button HTML:', toggleBtn.innerHTML);
                console.log('Toggle button classes:', toggleBtn.className);
            }
            checkStatus();
        }, 500);
    </script>
</body>
</html>
